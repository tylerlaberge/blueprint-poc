<div class="blueprint" cdkDrag (cdkDragMoved)="drag()" (mousedown)="grab()" (mouseup)="release()" [ngClass]="{'mouse-down': isDragging$ | async, 'locked': isLocked$ | async}">
    <div class="header" [ngClass]="{'locked': isLocked$ | async}">
        <h1 class="title">POST /todos</h1>
        <span class="lock-button open" (click)="toggleLock()" [ngClass]="{'open': !(isLocked$ | async), 'closed': isLocked$ | async}">
            <mat-icon *ngIf="!(isLocked$ | async)">lock_open</mat-icon>
            <mat-icon *ngIf="isLocked$ | async">lock</mat-icon>
        </span>
    </div>
    <hr>
    <div class="contract">
        <div class="inputs">
            <div class="add-port" (click)="addInput()" [ngClass]="{'locked': isLocked$ | async}"><mat-icon>add_circle_outline</mat-icon></div>
            <div class="port-container" *ngFor="let input of inputs$ | async">
                <div #port [id]="input.id" class="port"></div>
                <port-datatype [datatype]="input.datatype" [direction]="input.direction" [locked]="(isLocked$ | async)!" (onSelectDatatype)="selectPortType(input, $event)"></port-datatype>
                <port-delete-button [locked]="(isLocked$ | async)!" (onDeletePort)="deletePort(input)"></port-delete-button>
            </div>
        </div>
        <div class="outputs">
            <div class="add-port" (click)="addOutput()" [ngClass]="{'locked': isLocked$ | async}"><mat-icon>add_circle_outline</mat-icon></div>
            <div class="port-container" *ngFor="let output of outputs$ | async">
                <div #port [id]="output.id" class="port"></div>
                <port-delete-button [locked]="(isLocked$ | async)!" (onDeletePort)="deletePort(output)"></port-delete-button>
                <port-datatype [datatype]="output.datatype" [direction]="output.direction" [locked]="(isLocked$ | async)!" (onSelectDatatype)="selectPortType(output, $event)"></port-datatype>
            </div>
        </div>
    </div>
</div>
